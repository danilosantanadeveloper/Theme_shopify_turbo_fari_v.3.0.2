{% comment %}
  Generated by Okendo. Changes to this file may be overwritten.
  Enable or disable this snippet in your Okendo settings.
  Version 1.0.2
{% endcomment %}
{% if shop.metafields.okendo.settings.isJsonLdSnippetEnabled == true %}
  {% if request.page_type == 'product' %}
    {%- capture newline %}
    {% endcapture -%}
    <script type="application/ld+json">
      {
        "@context": "http://schema.org/",
        "@type": "Product",
        "name": "{{ product.title }}",
        "image": "https:{{ product.featured_image | product_img_url: '450x450' }}",
        "description": {{ product.description | strip_html | strip | escape | json }},
        "mpn": "{{ product.id }}",
        "brand": {
          "@type": "Thing",
          "name": "{{ product.vendor }}"
        },
        "offers": {
          "@type": "Offer",
          "priceCurrency": "{{ shop.currency }}",
          "price": "{{ product.selected_or_first_available_variant.price | money_without_currency | remove: "," }}",
          "availability": "{% if product.available %}InStock{% else %}OutOfStock{% endif %}",
          "seller": {
            "@type": "Organization",
            "name": "{{ shop.name }}"
          }
        }
        {% if product.metafields.okendo.summaryData.reviewCount > 0 %}
        ,"aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "{{ product.metafields.okendo.summaryData.reviewAverageValue }}",
          "ratingCount": "{{ product.metafields.okendo.summaryData.reviewCount }}"
        }
        {% elsif product.metafields.okendo.ReviewCount > 0 %}
        ,"aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "{{ product.metafields.okendo.ReviewAverageValue }}",
          "ratingCount": "{{ product.metafields.okendo.ReviewCount }}"
        }
        {% endif %}
      }
    </script>
  {% endif %}
{% endif %}
